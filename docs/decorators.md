# Декораторы

Декораторы используются для обработки поступающих запросов с Max API - например, получения сообщений или поступления команд. Они доступны для использования в классах `aiomax.Bot` и `aiomax.Router`.

Больше о роутерах можно почитать [тут](routers.md).

## `on_message(filter: Callable | str | None = None)`

Декоратор для получения сообщений.

Поддерживает фильтры. Вставьте `Callable` функцию в параметр функции on_message - в неё при отправке сообщения будет передаваться `Message`. Если она вернет `True`, функция вызовется.

Если вставить `str`, то будет вызываться в случае, если текст отправленного сообщения будет равен `str`.

Если не вставлять фильтр, функция вызовется при любом отправленном сообщении.

Отправляет функции объект класса `Message`.

## `on_message_edit(filter: Callable | str | None = None)`

Декоратор для получения сообщений при их редактировании.

Отправляет функции два объекта:

- первый (`before`) - предыдущее состояние сообщения `Message`. `None`, если выключен кэш сообщений в `Bot` или если сообщения нет в кэше.

- второй (`after`) - новое состояние сообщения `Message`.

Поддерживает фильтры. Вставьте `Callable` функцию в параметр функции on_message_edit - в неё при изменении сообщения будет передаваться `Message` **(новое состояние)**. Если она вернет `True`, функция вызовется.

Если вставить `str`, то будет вызываться в случае, если измененное сообщение кешировано и новый текст измененного сообщения будет равен `str`.

Если не вставлять фильтр, функция вызовется при любом измененном сообщении.

## `on_message_delete(filter: Callable | str | None = None)`

Декоратор для получения сообщений при их удалении.

Поддерживает фильтры. Вставьте `Callable` функцию в параметр функции on_message_delete - в неё при удалении сообщения будет передаваться `MessageDeletePayload`. Если она вернет `True`, функция вызовется.

Если вставить `str`, то будет вызываться в случае, если удаленное сообщение кешировано и текст удаленного сообщения будет равен `str`.

Если не вставлять фильтр, функция вызовется при любом удаленном сообщении.

Отправляет функции объект класса `MessageDeletePayload`.

## `on_bot_start()`

Декоратор вызывается, когда пользователь жмет кнопку "Начать" в ЛС с ботом.

Отправляет функции объект класса `BotStartPayload`.

## `on_ready()`

Декоратор вызывается перед началом долгого опроса (поллинга).

## `on_command(name: "str | None" = None, aliases = List[str] = [])`

Декоратор для получения команд с префиксом.

Принимает `name` - название команды и `aliases` - список с альтернативными названиями команд.

Если `name` не указан, то название команды берется из имени функции.

Отправляет функции объект класса `CommandsContext`.

## `on_button_callback(filter: Callable | None = None)`

Декоратор для отслеживания нажатий на кнопки типа `CallbackButton`.

Поддерживает фильтры. Вставьте `Callable` функцию в параметр функции on_message - в неё при отправке сообщения будет передаваться `Callback`. Если она вернет `True`, функция вызовется.

Этот декоратор не поддерживает использование `str` в качестве фильтра.

Отправляет функции объект класса `Callback`.

## `on_button_chat_create()`

Декоратор для отслеживания нажатий на создание чатов с помощью кнопки типа `ChatButton`.

Отправляет функции объект класса `ChatCreatePayload`.

## `on_bot_add()`

Декоратор для отслеживания добавления бота в чаты.

Отправляет функции объект класса `ChatMembershipPayload`.

## `on_bot_remove()`

Декоратор для отслеживания удаления бота с чатов.

Отправляет функции объект класса `ChatMembershipPayload`.

## `on_user_add()`

Декоратор для отслеживания добавления или входа пользователей в чаты.

Отправляет функции объект класса `UserMembershipPayload`.

## `on_user_remove()`

Декоратор для отслеживания удаления или выхода пользователей с чатов.

Отправляет функции объект класса `UserMembershipPayload`.

## `on_chat_title_change()`

Декоратор для отслеживания изменений названий чатов.

Отправляет функции объект класса `ChatTitleEditPayload`.
